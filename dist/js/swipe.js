var YangYiswipe=function(){function swipe_0(){$("#video .screen1 .box").addClass("animated");var e=function(){var e=$.Deferred();return setTimeAnimate([$("#video .screen1 .box .bak-img")],500,e)};e().then(function(){$("#video .screen1").siblings(".screen").find("img").removeClass("animated showpic");var e=$.Deferred();return setTimeAnimate([$(".screen1 .bak-top")],1500,e)}).then(function(){var e=$.Deferred();return setTimeAnimate([$(".screen1 .bak-bottom")],1500,e)}).then(function(){var e=$.Deferred();return setTimeAnimate([$(".screen1 .bak-bottom-logo")],1500,e)}).then(function(){var e=$.Deferred();return setTimeAnimate(null,3500,e,1,!0)})}function swipe_1(){$("#video .screen2 .box").addClass("animated");var e=function(){var e=$.Deferred();return setTimeAnimate([$(".screen2 .box .bak-img")],500,e)};e().then(function(){$("#video .screen2").siblings(".screen").find("img").removeClass("animated showpic");var e=$.Deferred();return setTimeAnimate([$(".screen2 .box .bak-top")],2e3,e)}).then(function(){var e=$.Deferred();return setTimeAnimate(null,5e3,e,2,!0)})}function swipe_2(){$("#video .screen3 .box").addClass("animated");var e=function(){var e=$.Deferred();return setTimeAnimate([$(".screen3 .box .bak-img")],500,e)};e().then(function(){$("#video .screen3").siblings(".screen").find("img").removeClass("animated showpic");var e=$.Deferred();return setTimeAnimate([$(".screen3 .box .bak-top")],2e3,e)}).then(function(){var e=$.Deferred();return setTimeAnimate(null,5e3,e,3,!0)})}function swipe_3(){$("#video .screen4 .box").addClass("animated");var e=function(){var e=$.Deferred();return setTimeAnimate([$(".screen4 .box .bak-img")],500,e)};e().then(function(){$("#video .screen4").siblings(".screen").find("img").removeClass("animated showpic"),$("#video .screen5").siblings(".screen").find("a").removeClass("animated showpic");var e=$.Deferred();return setTimeAnimate([$(".screen4 .box .bak-top")],2e3,e)}).then(function(){var e=$.Deferred();return setTimeAnimate(null,5e3,e,4,!0)})}function swipe_4(){$("#video .screen5 .bak-img").height($("body").height()-208);var e=function(){var e=$.Deferred();return setTimeAnimate([$(".screen5 .box .bak-img"),$(".screen5 .box .bak-phone"),$(".screen5 .bak-box-bottom"),$(".screen5 .box-bottom")],500,e)};e().then(function(){$("#video .screen5").siblings(".screen").find("img").removeClass("animated showpic"),$("#video .screen5").siblings(".screen").find("a").removeClass("animated showpic");var e=$.Deferred();return setTimeAnimate([$(".screen5 .box .bak-likedance")],2e3,e)}).then(function(){var e=$.Deferred();return setTimeAnimate([$(".screen5 .box .uploading")],2e3,e)}).then(function(){var e=$.Deferred();return setTimeAnimate([$(".screen5 .box .bak-huihua")],2e3,e)}).then(function(){timer=setInterval(function(){$(".screen5 .uploading").removeClass("animated bounce"),setTimeout(function(){$(".screen5 .uploading").addClass("animated bounce")},3e3)},2e3)})}function init(index){removeVideo(),html='<section id="video" class="warp hide">',html+='<section class="screen screen1"><div class="box fadeInLeft"><img class="bak-top pulse" src="../img/'+index+'/page-4.png" alt=""><img class="bak-img fadeIn" src="../img/'+index+'/page-1.png" alt=""><img class="bak-bottom tada" src="../img/'+index+'/page-2.png" alt=""><img class="bak-bottom-logo fadeInRight" src="../img/'+index+'/page-3.png" alt=""></div></section>',html+='<section class="screen screen2"><div class="box flipInX"><img class="bak-top fadeInDown" src="../img/'+index+'/page-6.png" alt=""><img class="bak-img lightSpeedIn" src="../img/'+index+'/page-5.png" alt=""></div></section>',html+='<section class="screen screen3"><div class="box fadeInDown"><img class="bak-top bounceInDown" src="../img/'+index+'/page-8.png" alt=""><img class="bak-img zoomIn" src="../img/'+index+'/page-7.png" alt=""> </div></section>',html+='<section class="screen screen4"><div class="box fadeInRight"><img class="bak-top fadeInLeft" src="../img/'+index+'/page-10.png" alt=""><img class="bak-img zoomIn" src="../img/'+index+'/page-9.png" alt=""></div></section>',html+='<section class="screen screen5" ><div class="box flip"><img class="bak-img fadeInLeft" src="../img/'+index+'/page-11.png" alt=""><img class="bak-huihua zoomInRight" src="../img/'+index+'/page-12.png" alt=""><img class="bak-phone fadeInLeft" src="../img/'+index+'/page-14.png" alt=""><img class="bak-likedance bounce" src="../img/'+index+'/page-15.png" alt=""><a class="uploading bounce" href="">点击下载 <i>99广场舞手机版</i></a><div class="box-bottom fadeInRight"><img class="bak-box-bottom fadeInRight" src="../img/'+index+'/page-13.png" alt=""></div></div></section>',html+="</section>",$("#chat").after(html),pageSlider=new WxMoment.PageSlider({pages:$(".screen"),onSwipeUp:function(){4!==this.index&&(cleartime(),eval("swipe_"+(this.index+1).toString()+"()"),this.next())},onSwipeDown:function(){0!==this.index&&(cleartime(),eval("swipe_"+(this.index-1).toString()+"()"),this.prev())}})}function setTimeAnimate(arrEle,time,defer,index,bloon){return timer=setTimeout(function(){if(bloon)pageSlider.next(),eval("swipe_"+index.toString()+"()");else for(var i=0;i<arrEle.length;i++)arrEle[i].addClass("showpic animated");defer.resolve()},time),setTime.push(timer),defer.promise()}function removeVideo(){pageSlider=null,$("#video").remove(),cleartime()}function cleartime(){for(var e=0;e<setTime.length;e++)clearTimeout(setTime[e])}function startMuisc(){$("#music").css("display","block"),$(".music_bg").css("display","block"),$(".music_pic").css("animation","music 2s linear infinite"),$("#music .aud")[0].play()}function stopMusic(){$("#music .aud")[0].pause(),$("#music").css("display","none"),$(".music_bg").css("display","none"),$(".music_pic").css("animation","none")}function pauseMusic(){$("#music .aud")[0].pause(),$(".music_bg").css("display","none"),$(".music_pic").css("animation","none")}function beginMusic(){var e=1;startMuisc(),$("#music").on("touchend",function(){1==e?(pauseMusic(),e=2):2==e&&(startMuisc(),e=1)})}var html="",pageSlider=null,timer=null,setTime=[];return{init:init,firstSwipe:swipe_0,removeVideo:removeVideo,startMuisc:startMuisc,pauseMusic:pauseMusic,beginMusic:beginMusic,stopMusic:stopMusic}}();